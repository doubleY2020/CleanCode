
# 함수

함수에 어떤 속성을 부여해야 처음 읽는 사람이 프로그램 내부를 직관적으로 파악할 수 있을까?

## 작게 만들어라!
- 각 함수가 이야기 하나를 표현하도록 해라.

### 블록과 들여쓰기
- 들여쑤기 수준은 1단이나 2단을 넘어서면 안된다. 그래야 함수는 읽고 이해하기 쉬워진다.

## 한 가지만 해라 !
- 함수는 한 가지를 해야 한다. 그 한가지를 잘 해야 한다. 그 한 가지만을 해야 한다.
- `한 가지`란 무엇인가?
  - 지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행하는 것.
> renderPageWithSetupsAndTeardowns(PageData pageData, boolean isSuite) 에서..  
> 페이지가 테스트 페이지인지 확인한 후, 테스트 페이지라면 설정 페이지와 해제 페이지를 넣는다.  
> 테스트 페이지든 아니든, 페이지를 HTML로 렌더링한다.  

### 함수 내 섹션
- 한 함수에서 한 가지 작업만 하는 함수는 자연스럽게 섹션으로 나누기 어렵다.


## 함수 당 추상화 수준은 하나로 !
- 함수 내 모든 문장의 추상화 수준이 동일해야 함수가 확실히 한 가지 작업만 할 수 있다.
> getHtml() -> 높음  
> String setupPathName = PathParser.render(setupPath); -> 중간  
> .append("\n") -> 아주 낮음  

- 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.

### 위에서 아래로 코드 읽기 : 내려가기 규칙
- 코드는 위에서 아래로 이야기처럼 읽혀야 좋은데, 한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 오도록 한다.


## Switch 문
- switch 문 또는 연속된 if/else 문은 작게 만들기 어렵다.
- 다형성을 이용하여 각 switch문을 저차원 클래스에 숨기고, 절대로 반복하지 않도록 해라.
  - switch 문을 추상 팩토리에 숨기고, 팩토리는 switch문을 사용해 적절한 Employee 파생 클래스의 인스턴스를 생성한다.



## 서술적인 이름을 사용하라 !
- 함수가 하는 일을 좀 더 잘표현하는 이름을 사용해라.
- 함수가 작고 단순할수록, 서술적인 이름을 고르기도 쉬워진다.
- 서술적인 이름을 사용하면 개발자 머릿속에서도 설계가 뚜렷해지므로 코드를 개선하기 쉬워진다.

## 함수 인수
- 인수는 가능한 적게 유지해라. 왜냐하면,
  - 개념을 이해하기 어렵게 만들기 때문에
  - 갖가지 인수 조합으로 함수를 검증하는 테스트 케이스를 작성하기 어렵기 때문에

### 단한 형식 (인수 1개)
- 인수에 질문을 던지는 경우
- 인수를 뭔가로 변환해 결과를 반한하는 경우
- 이벤트 처리 요청을 하는 경우
- 위 3가지 경우가 아니라면, 가급적 피해라.

### 플래그 인수
- 추하다.
- 한 번에 여러 가지 처리한다고 대놓고 공표하는 셈이다.
> 참이면 이걸 하고, 거짓이면 저걸 한다는 말이니까...

### 이항 함수, 삼항 함수
- 단항 함수보다 이해하기 어렵다..

### 인수 객체
- 개념을 표현할 수 있다.

### 인수 목록
- 사실상 이항 함수다.

### 동사와 키워드
- 인수의 용도를 유추할 수 있는 좋은 함수 이름을 고려해라.

## 부수 효과를 일으키지 마라.
- 예상하지 못한 작업을 하지 마라. 시간적인 결합이나 순서 종속성을 초래할 수 있다.
- 이름에 하는 일을 정확히 명시해라.

### 출력 인수
- 인수에 함수 결과를 반영하는 경우(인수의 수정이 일어나는 경우)
- 함수에서 상태를 변경해야 하는 경우, 함수가 속한 객체 상태를 변경하는 방식을 택해라.
```java
// as is
public void appendFooter(StringBuffer report);
// to be
report.appendFooter();
```

## 명령과 조회를 분리하라 !
- 뭔가를 수행하거나, 뭔가에 답하거나 둘 중 하나만 해야 한다.
- 객체 상태를 변경하거나, 객체 정보를 반환하거나.

## 오류 코드보다 예외를 사용하라 !
- 함수 결과로 오류 코드를 반환하는 방식은 여러 단계로 중첩되는 코드를 야기한다.
> 호출자는 오류 코드를 곧바로 처리해야 한다는 문제가 있다 -> ?  
> http request handling 하는 경우는 ?  

- 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.

### try/catch 블록 뽑아내기
- try/catch 블록을 별도 함수로 뽑아내는 편이 좋다.

### 오류 처리도 한 가지 작업이다.
- 오류를 처리하는 함수는 오류만 처리해야 마땅하다.

### Error.java 의존성 자석
- 오류 코드를 반환한다는 이야기는, 어디선가 오류 코드를 정의한다는 뜻이고, 이는 수정 범위가 커짐을 뜻한다.
- 예외를 사용하면 기존 코드 수정 없이 새 예외는 클래스를 추가할 수 있다.

## 반복하지 마라!
- 반복하지 마라. 수정이 있으면 모두 손 봐야 한다.

## 구조적 프로그래밍
- return, break, continue -> ok
- goto -> NO

## 함수를 어떻게 짜죠?
- 먼저 생각을 기록한 후 읽기 좋게 다듬는다.

## 결론
