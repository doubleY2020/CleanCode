# 단위 테스트 

## TDD 법칙 세가지 
> TDD(Test Driven Development) - 테스트 주도 개발. 매우 짧은 개발 사이클을 반복하는 소프트웨어 개발 프로세스

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다. 
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다. 
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다. 

위 규칙을 따르면 엄청난 테스트 케이스가 나오고,   
실제 코드와 맞먹을 정도로 방대한 테스트 코드는 심각한 관리 문제를 유발할 수 있다. 


## 깨끗한 테스트 코드 유지하기 
- 어떤 팀 내에서 테스트 코드에 실제 코드와 동일한 품질 기준을 적용하지 않아도 된다는 룰 정의 ('지저분해도 빨리')
- 해당 팀은 지저분한 테스트 코드라도 있는 편이 좋다라고 판단했을 수 있음 
- 하지만, 테스트 코드가 지저분할 수록 변경이 어려워짐. 
   - 실제 코드가 진화하면 테스트 코드도 변해야 하는데, 
   기존 코드를 변경하거나 실제 코드를 짜는 시간보다 TC 추가하는 시간이 시간이 더 걸림. 
- 그렇다고 테스트 코드가 없으면 ? 수정에 대한 안정성을 확인하기 어려워짐. 결함율이 높아짐. 
- 결국, 실패를 초래한 원인은 _테스트 코드를 막 짜고 좋다고 허용한 결정_
- 테스트 코드는 실제 코드 못 않게 중요하므로, 깨끗하게 짜야 한다. 


### ⭐️ 테스트는 유연성, 유지보수성, 재사용성을 제공한다.⭐️
- 코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위 테스트.   
   - 유연성 : 시스템이 설계된 환경이 아닌 다른 목적이나 환경으로 변경할 수 있는 정 
   - 유지보수성 : 소프트웨어 시스템의 기능을 변경하거나 기능을 추가하거나 성능을 향상시커거나 결함을 수정하기 위해서 시스템을 변경할 때의 편의성
   - 재사용성 : 시스템의 일부분을 다른 시스템에서 사용할 수 있는 정도나 편의성
- 자동화된 단위 테스트는 설계와 아키텍처를 최대한 깨끗하게 보존하는 열쇠
- 테스트 코드가 지저분하면, 코드를 변경하는 능력이 떨어지며 코드 구조를 개선하는 능력도 떨어진다. 


## 깨끗한 테스트 코드 
- 테스트 코드는 실제 코드보다 더 가독성(x3) 이 중요하다 
- 가독성을 높이려면 최소의 표현으로 많은 것을 나타내야 한다. 

## 테스트 당 assert 하나 
- 함수마다 assert 하나만 사용해야 한다는 학파 존재 
   - 장점으로는 결론이 하나라서, 코드를 이해하기 쉽고 빠르다 
   - but, 중복 코드가 많아짐 
- 중복 제거 방법 -> Template Method 패턴, 상속, @Before/@Test 등 어노테이션 사용 
- 배보다 배꼽이 클 수 있으니, assert 문 여러개가 나을 수 있다. **_(최대한 줄여서)_**

### 테스트 당 개념 하나 가 낫다. 
- 잡다한 개념을 연속으로 테스트하는 긴 함수는 피한다. 

### F.I.R.S.T
- Fast : 테스트는 자주 돌려야 되므로, 빨라야 한다. (자주 돌려서 문제도 빠르게 찾고, 마음껏 정리할 수도 있고..)
- Independent : 테스트 끼리 의존성을 가지면 안된다. 어떤 순서로 실행해도 괜찮아야 한다. 
- Repeatable : 테스트는 어떠한 상황이든 반복 가능해야 한다. (환경에 종속받지 않아야 함)
- Self-Validating : 결과값을 만들어 내야 한다. 
- Timely : 테스트는 적시에 작성해야 한다. (실제 코드 구현 직전)
   - 코드 만들고 테스트를 만들면 테스트하기 어렵다는 사실을 발견할지도 모른다. 

