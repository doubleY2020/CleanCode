## 9. 단위 테스트
- 애자일과 TDD덕분에 단위 테스트를 자동화하는 프로그래머들이 늘어나는 추세다.
- 제대로 된 테스트케이스를 작성해야 한다는 중요한 사실을 놓쳐서는 안된다.

### 9.1 TDD법칙 세 가지
1. 실패하는 단위 테스트를 작성할때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할정도로만 실제 코드를 작성한다. 

- 위 세가지 규칙을 따르면 테스트코드가 실제 코드가 함께 나온다. 
- 실제 코드와 맞먹을정도로 방대한 테스트코드는 심각한 관리 문제를 유발하기도 한다. 

### 9.2 깨끗한 테스트 코드 유지하기
- 코드가 진화하면 테스트코드도 변해야 한다.
- 테스트코드가 지저분할수록 변경하기 힘들어진다.
- 테스트코드는 실제 코드 못지않게 중요하다. 
- 단위 테스트는 유연성, 유지보수성, 재사용성을 제공한다.

### 9.3 깨끗한 테스트 코드
- 깨끗한 테스트 코드를 만들려면, 가독성이 필요하다.
- 가독성을 높이려면, 명료성, 단순성, 풍부한 표현력이 필요하다.
- 테스트코드는 본론에 돌입해 진짜 필요한 자료 유형과 함수만 사용한다.
- 도메인에 특화된 언어를 테스트 코드를 구현한다.
- 이중 표준 : 테스트 API 코드에 적용하는 표준은 실제 코드에 적용하는 표준과 다르다.

### 9.4 테스트 당 assert 하나
- assert 문이 하나인 함수는 결론이 하나라서 코드를 이해하기 쉽고 빠르다. 
- 하지만, assert 문을 하나로 병합하는것이 불합리한 경우도 있다. 
- assert 문 개수는 줄일수록 좋다. 
- 테스트 당 개념 하나 : 새 개념을 한 함수로 몰아넣으면 독자가 각 절이 거기에 존재하는 이유와 개념을 모두 이해해야 한다. 

### 9.5 F.I.R.S.T
깨끗한 테스트는 다섯가지 규칙을 따른다.
1. Fast : 테스트는 빨리 돌아야 한다. 자주 돌리지 못하면 초반에 문제를 찾아내지 못한다.
2. Independent : 각 테스트는 서로 의존하면 안된다. 어떤 순서로 실행해도 괜찮아야 한다. 
3. Repeatable : 어떤 환경에서도 반복 가능해야 한다. 실제 환경, QA환경 등 돌아가지 않는 환경이 없어야 한다.
4. Self-validating(자가검증하는) : 테스트는 bool값으로 결과를 내야 한다. 
5. Timely(적시에) : 단위 테스트는 실제 코드를 구현하기 전에 구현한다. 
